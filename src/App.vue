<script setup>
import { onMounted } from 'vue'
import { storeToRefs } from 'pinia'
import { useRouter } from 'vue-router'
import { useUserStore } from '@/Store/userStore'

import Navbar from './components/Navbar.vue'
import Header from './components/Header.vue'
import BucketList from './components/BucketList.vue'
import Footer from './components/Footer.vue'
import { ref } from 'vue'

const router = useRouter()
const userStore = useUserStore()
const { user } = storeToRefs(userStore)
const brand = "Secret Santa";

const bucketList = ref([
  { id: 1, name: "Go shopping", img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRJxnHJloTY_wLFoiUQ7ppEe-EAk4ZmrnsLLw&s"},
  { id: 2, name: "Wrap gifts", img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSRnOOz48tcIw4vn30kiT3y1polpGI2o0pTOw&s"},
  { id: 3, name: "Bake cookies", img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR8kxJld7YebBcDuDPzruyArNx69CO4QZljdQ&s"},
  { id: 4, name: "Decorate the Christmas Tree", img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQXF59YMx14S47JFAI6peh1W9KAZv-KTO3CsQ&s"},
  { id: 5, name: "Make Dinner with Family", img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ8CN1uGdhJziQp2j_QtVKwFhlBdO9Om8Bi2A&s"},
  { id: 6, name: "Watch 'Home alone'", img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTlYw8KvTetE7LQsjaX2J0ybliaW1gO3ybXWw&s"},
  { id: 7, name: "Make a Snowman", img: "data:image/jpeg;base64,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"},
  { id: 8, name: "Visit the Christmas market", img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTiUiGIbbQc18p_uXOXYIzmKKSeIItr0moRjg&s"}
]);

onMounted(async () => {
  try {
    await userStore.fetchUser() // here we call fetch user
    if (!user.value) {
      // redirect them to logout if the user is not there
      router.push({ path: '/auth' })
    } else {
      // continue to dashboard
      router.push({ path: '/' })
    }
  } catch (e) {
    console.log(e)
  }
})
</script>

<template>
  <div>
    <!-- Navbar block-->
    <Navbar />
    <!--Passing dynamic data as props-->
    <Header :brand="brand"></Header>

    <!--Bucket List block-->
    <BucketList :bucketList="bucketList"></BucketList>

    <!-- Router block fÃ¶r andra vyer -->
    <router-view></router-view>

    <!-- Footer block-->
    <Footer></Footer>
  </div>
</template>

<style scoped></style>
